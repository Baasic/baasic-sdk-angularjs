!function(e){var i=["HALParser"];e.module=angular.module("baasic.baasicApi",i).config(e.configDefinition).constant("baasicApiConfig",e.apiConfig).constant("systemApiConfig",e.systemApiConfig).value("baasicApiKey","").service("baasicSystemApp",e.baasicSystemAppServiceDefinition).service("baasicSystemApiHttp",e.baasicSystemApiHttpDefinition).service("baasicApp",e.baasicAppServiceDefinition).service("baasicApiHttp",e.baasicApiHttpDefinition)}(MonoSoftware.BaasicApi),MonoSoftware=MonoSoftware||{},MonoSoftware.BaasicApi={},function(e){function i(e){e.decorator("$httpBackend",["$delegate","$q","$rootScope","$window","$document","baasicApp",function(e,i,t,a,o,r){function c(e,i){e.requestId=l;var n={callback:i,message:e,posted:!1};d[e.requestId]=n,p(n),l+=1}function s(){for(var e in d){var i=d[e];i.posted||p(i)}}function p(e){u&&(u.contentWindow.postMessage(JSON.stringify(e.message),f),e.posted=!0)}if(n())return e;var f=r.get_apiUrl(),u=null,d=new Object,l=0,A=angular.element('<div style="display:none"><iframe src="'+f+'proxy/angular"></iframe></div>');return A.find("iframe").bind("load",function(){u=this,s()}),o.find("body").append(A),angular.element(a).bind("message",function(e){var i=e.originalEvent||e;if(i.source==u.contentWindow){var n=JSON.parse(i.data),t=d[n.requestId];t&&(delete d[n.requestId],t.callback(n.status,n.response,n.headersString))}}),function(i,n,t,a,o,r,s,p){0==n.indexOf(f)?c({method:i,url:n,post:t,headers:o,timeout:r,withCredentials:s,responseType:p},a):e(i,n,t,a,o,r,s,p)}}])}function n(){return"withCredentials"in new XMLHttpRequest&&!(window.ActiveXObject||"ActiveXObject"in window)}e.configDefinition=["$provide",i]}(MonoSoftware.BaasicApi),function(e){e.apiConfig={apiRootUrl:"api.baasic.local",apiVersion:"beta"}}(MonoSoftware.BaasicApi),function(e){function i(e){_.each(_.rest(arguments,1),function(i){e[i]=function(n,t){return e(o(t||{},{method:i,url:n}))}})}function n(e){_.each(_.rest(arguments,1),function(i){e[i]=function(n,t,a){return e(o(a||{},{method:i,url:n,data:t}))}})}function t(e,i,n,t){return r(e,i,n,t)}function a(e,i,n,t){function a(){var i=e.defer(),n=i.promise;return n.success=function(e){return n.then(function(i){e(i.data,i.status,i.headers,i.config)}),n},n.error=function(e){return n.then(null,function(i){e(i.data,i.status,i.headers,i.config)}),n},i}var o=r(e,i,n,t);return o.createMockDefer=function(){var e=a(),i=e.resolve,n=e.reject;return e.resolve=function(e){i({data:e})},e.reject=function(e){n({data:e})},e},o}e.baasicApiHttpDefinition=["$q","$http","HALParser","baasicApp",a],e.baasicSystemApiHttpDefinition=["$q","$http","HALParser","baasicSystemApp",t];var o=angular.extend,r=function(e,t,a,r,c){var s,p=new a,f=r.get_apiUrl(),u=function(e){if(e){e.withCredentials=!0,e.url=f+e.url;var i=e.headers||(e.headers={});i["Content-Type"]||(i["Content-Type"]="application/json; charset=UTF-8"),i.Accept||(i.Accept="application/hal+json; charset=UTF-8");var n=r.get_accessToken();n&&(i.AUTHORIZATION=n.token_type+" "+n.access_token)}var a=t(e);return a=o(a.then(function(e){e.data&&e.data._links&&(e.data=p.parse(e.data))}),a)};return s=c?function(e){return c(e),u(e)}:u,i(s,"get","delete","head","jsonp"),n(s,"post","put"),s}}(MonoSoftware.BaasicApi),function(e){function i(e,i){return MonoSoftware.Baasic.Application.init(e,i)}e.baasicAppServiceDefinition=["baasicApiKey","baasicApiConfig",i]}(MonoSoftware.BaasicApi),function(e){function i(e){return MonoSoftware.Baasic.Application.init("system",e)}e.baasicSystemAppServiceDefinition=["systemApiConfig",i]}(MonoSoftware.BaasicApi),function(e){e.systemApiConfig={apiRootUrl:"api.baasic.local",apiVersion:"beta"}}(MonoSoftware.BaasicApi);